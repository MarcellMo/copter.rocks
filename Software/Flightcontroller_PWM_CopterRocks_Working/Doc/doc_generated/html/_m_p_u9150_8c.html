<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Larix_Flightcontroller: MPU9150.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Larix_Flightcontroller
   &#160;<span id="projectnumber">V1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_03cf01c4772c7407eaba236370e50c01.html">_Quadrocopter</a></li><li class="navelem"><a class="el" href="dir_f85e0a88172f6bf18b26c691e64c4f3f.html">Sensors</a></li><li class="navelem"><a class="el" href="dir_929c4b7ba4fdad007707ef57ecb0f875.html">MPU9X50</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">MPU9150.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="_m_p_u9150_8h_source.html">MPU9150.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa9d3f4102d6c3dacb07fd0da57a649cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#aa9d3f4102d6c3dacb07fd0da57a649cb">MPU9150_Setup</a> (void)</td></tr>
<tr class="memdesc:aa9d3f4102d6c3dacb07fd0da57a649cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">gets increased when the mpu sends new data  <a href="#aa9d3f4102d6c3dacb07fd0da57a649cb">More...</a><br /></td></tr>
<tr class="separator:aa9d3f4102d6c3dacb07fd0da57a649cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afad3e4f9d9238da5ffde49b155d9e457"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#afad3e4f9d9238da5ffde49b155d9e457">MPU9150_Init</a> (void)</td></tr>
<tr class="memdesc:afad3e4f9d9238da5ffde49b155d9e457"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialises the MPU and configures gyro and accelerometer.  <a href="#afad3e4f9d9238da5ffde49b155d9e457">More...</a><br /></td></tr>
<tr class="separator:afad3e4f9d9238da5ffde49b155d9e457"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c49498e2784ee40fe0d7b4766abbfdb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a0c49498e2784ee40fe0d7b4766abbfdb">MPU9150_InitAK8975A</a> (float *destination)</td></tr>
<tr class="memdesc:a0c49498e2784ee40fe0d7b4766abbfdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">initals 3 axis magnetometer  <a href="#a0c49498e2784ee40fe0d7b4766abbfdb">More...</a><br /></td></tr>
<tr class="separator:a0c49498e2784ee40fe0d7b4766abbfdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2137323c677e007dc23af3982d0d70b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#ab2137323c677e007dc23af3982d0d70b">MPU9150_Calibrate</a> (void)</td></tr>
<tr class="memdesc:ab2137323c677e007dc23af3982d0d70b"><td class="mdescLeft">&#160;</td><td class="mdescRight">calibrates the MPU  <a href="#ab2137323c677e007dc23af3982d0d70b">More...</a><br /></td></tr>
<tr class="separator:ab2137323c677e007dc23af3982d0d70b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80e8e31ece39826744afca452c8f84f4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a80e8e31ece39826744afca452c8f84f4">MPU9150_SelfTest</a> (void)</td></tr>
<tr class="memdesc:a80e8e31ece39826744afca452c8f84f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Self test for the MPU.  <a href="#a80e8e31ece39826744afca452c8f84f4">More...</a><br /></td></tr>
<tr class="separator:a80e8e31ece39826744afca452c8f84f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03e83f5eaf88f5eb3a73d9c9179552ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a03e83f5eaf88f5eb3a73d9c9179552ea">getGres</a> (void)</td></tr>
<tr class="memdesc:a03e83f5eaf88f5eb3a73d9c9179552ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets gRes variable for calculating gyro value  <a href="#a03e83f5eaf88f5eb3a73d9c9179552ea">More...</a><br /></td></tr>
<tr class="separator:a03e83f5eaf88f5eb3a73d9c9179552ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8576aaf6260747651cb99775519156d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a8576aaf6260747651cb99775519156d4">getAres</a> (void)</td></tr>
<tr class="memdesc:a8576aaf6260747651cb99775519156d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">sets Ares variable for calculating accelerometer value  <a href="#a8576aaf6260747651cb99775519156d4">More...</a><br /></td></tr>
<tr class="separator:a8576aaf6260747651cb99775519156d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad139c70ad8fe17edf3bbbfa7f74db13e"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#ad139c70ad8fe17edf3bbbfa7f74db13e">GetSensorCount</a> (void)</td></tr>
<tr class="memdesc:ad139c70ad8fe17edf3bbbfa7f74db13e"><td class="mdescLeft">&#160;</td><td class="mdescRight">getter for SensorCount  <a href="#ad139c70ad8fe17edf3bbbfa7f74db13e">More...</a><br /></td></tr>
<tr class="separator:ad139c70ad8fe17edf3bbbfa7f74db13e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affccf93aa2c7445f501003cb3c7ec823"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#affccf93aa2c7445f501003cb3c7ec823">GetAngles</a> (float *angles)</td></tr>
<tr class="memdesc:affccf93aa2c7445f501003cb3c7ec823"><td class="mdescLeft">&#160;</td><td class="mdescRight">calculates angles  <a href="#affccf93aa2c7445f501003cb3c7ec823">More...</a><br /></td></tr>
<tr class="separator:affccf93aa2c7445f501003cb3c7ec823"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba6353e685d53cdbbaaddba7390283c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#aba6353e685d53cdbbaaddba7390283c3">GetMagData</a> (float *pt)</td></tr>
<tr class="memdesc:aba6353e685d53cdbbaaddba7390283c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">getter for magnetic data  <a href="#aba6353e685d53cdbbaaddba7390283c3">More...</a><br /></td></tr>
<tr class="separator:aba6353e685d53cdbbaaddba7390283c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa71d315bcdb1b9323329962a481a1490"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#aa71d315bcdb1b9323329962a481a1490">GetGyroData</a> (float *pt)</td></tr>
<tr class="memdesc:aa71d315bcdb1b9323329962a481a1490"><td class="mdescLeft">&#160;</td><td class="mdescRight">getter for gyro data  <a href="#aa71d315bcdb1b9323329962a481a1490">More...</a><br /></td></tr>
<tr class="separator:aa71d315bcdb1b9323329962a481a1490"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05f6f2f09b0d64f157081650ac411271"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a05f6f2f09b0d64f157081650ac411271">GetAccData</a> (float *pt)</td></tr>
<tr class="memdesc:a05f6f2f09b0d64f157081650ac411271"><td class="mdescLeft">&#160;</td><td class="mdescRight">getter for acceleration data  <a href="#a05f6f2f09b0d64f157081650ac411271">More...</a><br /></td></tr>
<tr class="separator:a05f6f2f09b0d64f157081650ac411271"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ae2ee3ce9369114b232aba97d813ddd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a2ae2ee3ce9369114b232aba97d813ddd">MPU9X50_Ext_Int_ISR</a> (void)</td></tr>
<tr class="memdesc:a2ae2ee3ce9369114b232aba97d813ddd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interrupt service routine of the externel MPU interrupt.  <a href="#a2ae2ee3ce9369114b232aba97d813ddd">More...</a><br /></td></tr>
<tr class="separator:a2ae2ee3ce9369114b232aba97d813ddd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a812d10f594dfdeeab08734a739102717"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a812d10f594dfdeeab08734a739102717">transformation</a> (float *values)</td></tr>
<tr class="memdesc:a812d10f594dfdeeab08734a739102717"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transformation for MPU values.  <a href="#a812d10f594dfdeeab08734a739102717">More...</a><br /></td></tr>
<tr class="separator:a812d10f594dfdeeab08734a739102717"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb0eedc9c5b8538ab45234561338824f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#adb0eedc9c5b8538ab45234561338824f">transformation_mag</a> (float *values)</td></tr>
<tr class="memdesc:adb0eedc9c5b8538ab45234561338824f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transformation for MPU values.  <a href="#adb0eedc9c5b8538ab45234561338824f">More...</a><br /></td></tr>
<tr class="separator:adb0eedc9c5b8538ab45234561338824f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8af7385d4430f2a52a33944e75b76dda"><td class="memItemLeft" align="right" valign="top">XMC_GPIO_CONFIG_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a8af7385d4430f2a52a33944e75b76dda">i2c_sda_mpu</a></td></tr>
<tr class="separator:a8af7385d4430f2a52a33944e75b76dda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f31e316557e6fb374efe71d557b59c4"><td class="memItemLeft" align="right" valign="top">XMC_GPIO_CONFIG_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a1f31e316557e6fb374efe71d557b59c4">i2c_scl_mpu</a></td></tr>
<tr class="separator:a1f31e316557e6fb374efe71d557b59c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51fdd16f159d1e82e7c5c7445e1bf022"><td class="memItemLeft" align="right" valign="top">XMC_I2C_CH_CONFIG_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a51fdd16f159d1e82e7c5c7445e1bf022">i2c_cfg_mpu</a></td></tr>
<tr class="separator:a51fdd16f159d1e82e7c5c7445e1bf022"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3842ef7e7823c37b07e3873e088f7df1"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a3842ef7e7823c37b07e3873e088f7df1">Gscale</a> = <a class="el" href="_m_p_u9150_8h.html#a56b5f26fc75e706b7513b8bac0006980a18297ef630f6920f812695549cc2262b">GFS_250DPS</a></td></tr>
<tr class="separator:a3842ef7e7823c37b07e3873e088f7df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b3bba16cabe134bc640926508ec94d3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a1b3bba16cabe134bc640926508ec94d3">Ascale</a> = <a class="el" href="_m_p_u9150_8h.html#a809d38a83bb0293b913cb890cafd82a8a93154da7a495cfb3b9ab29d2d5d4891b">AFS_2G</a></td></tr>
<tr class="separator:a1b3bba16cabe134bc640926508ec94d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00dcba4fbbc703a15404c051f397721f"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a00dcba4fbbc703a15404c051f397721f">aRes</a></td></tr>
<tr class="separator:a00dcba4fbbc703a15404c051f397721f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a307450bd86f46af27a40a489f873e9f6"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a307450bd86f46af27a40a489f873e9f6">gRes</a></td></tr>
<tr class="separator:a307450bd86f46af27a40a489f873e9f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab80fbc567eaccc2870b5f3adf0a4ed04"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#ab80fbc567eaccc2870b5f3adf0a4ed04">mRes</a></td></tr>
<tr class="separator:ab80fbc567eaccc2870b5f3adf0a4ed04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48f771d048650746960e9496ffe001e3"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a48f771d048650746960e9496ffe001e3">accRaw</a> [3]</td></tr>
<tr class="memdesc:a48f771d048650746960e9496ffe001e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">scale resolutions per LSB for the sensors  <a href="#a48f771d048650746960e9496ffe001e3">More...</a><br /></td></tr>
<tr class="separator:a48f771d048650746960e9496ffe001e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d9c8729a5e996511b33700675fe994b"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a4d9c8729a5e996511b33700675fe994b">gyroRaw</a> [3]</td></tr>
<tr class="separator:a4d9c8729a5e996511b33700675fe994b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87ec3a7b706cdb284c43edced845acd4"><td class="memItemLeft" align="right" valign="top">int16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a87ec3a7b706cdb284c43edced845acd4">magRaw</a> [3]</td></tr>
<tr class="separator:a87ec3a7b706cdb284c43edced845acd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa71c43964fa7767f0461b2a0e0c0b151"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#aa71c43964fa7767f0461b2a0e0c0b151">acc</a> [3] = {0.0f}</td></tr>
<tr class="separator:aa71c43964fa7767f0461b2a0e0c0b151"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addac5578d412440de5e9c3760475dec7"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#addac5578d412440de5e9c3760475dec7">gyro</a> [3] = {0.0f}</td></tr>
<tr class="separator:addac5578d412440de5e9c3760475dec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bfde20656d3b3e853ffd2bacd794bc5"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a8bfde20656d3b3e853ffd2bacd794bc5">mag</a> [3] = {0.0f}</td></tr>
<tr class="separator:a8bfde20656d3b3e853ffd2bacd794bc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d41bf736f1c2b22106e031a60ab3380"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a4d41bf736f1c2b22106e031a60ab3380">magCalibration</a> [3] = {0.0f, 0.0f, 0.0f}</td></tr>
<tr class="separator:a4d41bf736f1c2b22106e031a60ab3380"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab21cc09df0e86cbca99e62e46e362334"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#ab21cc09df0e86cbca99e62e46e362334">magbias</a> [3] = {0.0f, 0.0f, 0.0f}</td></tr>
<tr class="separator:ab21cc09df0e86cbca99e62e46e362334"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbffa34110f15b21994d3d087a0f4e7f"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#acbffa34110f15b21994d3d087a0f4e7f">q</a> [4] = {1.0f, 0.0f, 0.0f, 0.0f}</td></tr>
<tr class="memdesc:acbffa34110f15b21994d3d087a0f4e7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Factory mag calibration and mag bias.  <a href="#acbffa34110f15b21994d3d087a0f4e7f">More...</a><br /></td></tr>
<tr class="separator:acbffa34110f15b21994d3d087a0f4e7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bfaa14e96039bba6ec0de428d4eeff1"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a1bfaa14e96039bba6ec0de428d4eeff1">eInt</a> [3] = {0.0f, 0.0f, 0.0f}</td></tr>
<tr class="memdesc:a1bfaa14e96039bba6ec0de428d4eeff1"><td class="mdescLeft">&#160;</td><td class="mdescRight">vector to hold quaternion  <a href="#a1bfaa14e96039bba6ec0de428d4eeff1">More...</a><br /></td></tr>
<tr class="separator:a1bfaa14e96039bba6ec0de428d4eeff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86a3ab105f11d2513678f38ea4e5ac1e"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#a86a3ab105f11d2513678f38ea4e5ac1e">lastUpdate</a> = 0</td></tr>
<tr class="memdesc:a86a3ab105f11d2513678f38ea4e5ac1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">vector to hold integral error for Mahony method  <a href="#a86a3ab105f11d2513678f38ea4e5ac1e">More...</a><br /></td></tr>
<tr class="separator:a86a3ab105f11d2513678f38ea4e5ac1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af07e8900ae774f4274340f2ca15d7098"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#af07e8900ae774f4274340f2ca15d7098">counterSensor</a> = 0</td></tr>
<tr class="memdesc:af07e8900ae774f4274340f2ca15d7098"><td class="mdescLeft">&#160;</td><td class="mdescRight">used to calculate integration interval  <a href="#af07e8900ae774f4274340f2ca15d7098">More...</a><br /></td></tr>
<tr class="separator:af07e8900ae774f4274340f2ca15d7098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf9ee789f7405a424a0b412257623cd0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_u9150_8c.html#abf9ee789f7405a424a0b412257623cd0">dcounter</a> = 0</td></tr>
<tr class="separator:abf9ee789f7405a424a0b412257623cd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a05f6f2f09b0d64f157081650ac411271"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GetAccData </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>getter for acceleration data </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pt</td><td>returned data gets written here</td></tr>
  </table>
  </dd>
</dl>
<p>returns the current data in a float[3] array </p>

</div>
</div>
<a class="anchor" id="affccf93aa2c7445f501003cb3c7ec823"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GetAngles </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>angles</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calculates angles </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">angles</td><td>pointer to the output</td></tr>
  </table>
  </dd>
</dl>
<p>calculates the angles with the selected algorithm </p>

</div>
</div>
<a class="anchor" id="a8576aaf6260747651cb99775519156d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getAres </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sets Ares variable for calculating accelerometer value </p>
<p>Function sets a global variable </p>

</div>
</div>
<a class="anchor" id="a03e83f5eaf88f5eb3a73d9c9179552ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getGres </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>sets gRes variable for calculating gyro value </p>
<p>Function sets a global variable </p>

</div>
</div>
<a class="anchor" id="aa71d315bcdb1b9323329962a481a1490"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GetGyroData </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>getter for gyro data </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pt</td><td>returned data gets written here</td></tr>
  </table>
  </dd>
</dl>
<p>returns the current gyro data in degree in a float[3] array </p>

</div>
</div>
<a class="anchor" id="aba6353e685d53cdbbaaddba7390283c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void GetMagData </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>pt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>getter for magnetic data </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pt</td><td>returned data gets written here</td></tr>
  </table>
  </dd>
</dl>
<p>writes the magnetometer values on the array with first position pt in a float[3] array </p>

</div>
</div>
<a class="anchor" id="ad139c70ad8fe17edf3bbbfa7f74db13e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t GetSensorCount </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>getter for SensorCount </p>
<dl class="section return"><dt>Returns</dt><dd>current value of SensorCount</dd></dl>
<p>sensor count is a counter which gets elevated each time the mpu sends an interrupt </p>

</div>
</div>
<a class="anchor" id="ab2137323c677e007dc23af3982d0d70b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MPU9150_Calibrate </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>calibrates the MPU </p>
<p>Function which accumulates gyro and accelerometer data after device initialization. <br />
 It calculates the average of the at-rest readings and then loads the resulting offsets into accelerometer and gyro bias registers. </p>

</div>
</div>
<a class="anchor" id="afad3e4f9d9238da5ffde49b155d9e457"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MPU9150_Init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialises the MPU and configures gyro and accelerometer. </p>
<p>wakes up device (enables all sensors and clears sleep mode bit)<br />
Configures gyro and accelerometer (sets bandwith to 44 and 42 Hz, sample rate at 1 kHz)<br />
sets gyroscope full scale rage<br />
sets accelerometer configuration<br />
configures fifo<br />
self tests magnetometer(WHO_AM_I register)<br />
cofigures magnetometer for FIFO<br />
configures interrupts and bypass enable </p>

</div>
</div>
<a class="anchor" id="a0c49498e2784ee40fe0d7b4766abbfdb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MPU9150_InitAK8975A </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>destination</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initals 3 axis magnetometer </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">destination</td><td>pointer on destinaton where to send the adjustment values</td></tr>
  </table>
  </dd>
</dl>
<p>returns the adjustment values for the 3 axis </p>

</div>
</div>
<a class="anchor" id="a80e8e31ece39826744afca452c8f84f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool MPU9150_SelfTest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Self test for the MPU. </p>
<dl class="section return"><dt>Returns</dt><dd>returns true if passed and false if not</dd></dl>
<p>Should return percent deviation from factory trim values, +/- 14 or less deviation is a pass </p>

</div>
</div>
<a class="anchor" id="aa9d3f4102d6c3dacb07fd0da57a649cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MPU9150_Setup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>gets increased when the mpu sends new data </p>
<p>MPU I2C setup and selftests</p>
<p>Sets up I2C FIFO<br />
makes a selftest through reading the WHO_AM_I register<br />
</p>

</div>
</div>
<a class="anchor" id="a2ae2ee3ce9369114b232aba97d813ddd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MPU9X50_Ext_Int_ISR </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interrupt service routine of the externel MPU interrupt. </p>
<p>gets called when the mpu has new data and sets the interrupt pin<br />
reads in the raw data and processes it </p>

</div>
</div>
<a class="anchor" id="a812d10f594dfdeeab08734a739102717"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void transformation </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>values</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transformation for MPU values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">values</td><td>Parameter_Description</td></tr>
  </table>
  </dd>
</dl>
<p>Transforms the positioning from Prototype PCP to the Larix PCB </p>

</div>
</div>
<a class="anchor" id="adb0eedc9c5b8538ab45234561338824f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void transformation_mag </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>values</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transformation for MPU values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">values</td><td>Parameter_Description</td></tr>
  </table>
  </dd>
</dl>
<p>Transforms the positioning from Prototype PCP to the Larix PCB </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="aa71c43964fa7767f0461b2a0e0c0b151"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float acc[3] = {0.0f}</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>corrected and usefull accelerometer data </p>

</div>
</div>
<a class="anchor" id="a48f771d048650746960e9496ffe001e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t accRaw[3]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>scale resolutions per LSB for the sensors </p>
<p>raw data from accelerometer </p>

</div>
</div>
<a class="anchor" id="a00dcba4fbbc703a15404c051f397721f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float aRes</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1b3bba16cabe134bc640926508ec94d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="_m_p_u9150_8h.html#a809d38a83bb0293b913cb890cafd82a8">Ascale</a> = <a class="el" href="_m_p_u9150_8h.html#a809d38a83bb0293b913cb890cafd82a8a93154da7a495cfb3b9ab29d2d5d4891b">AFS_2G</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Scale range of accelerometer </p>

</div>
</div>
<a class="anchor" id="af07e8900ae774f4274340f2ca15d7098"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t counterSensor = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>used to calculate integration interval </p>

</div>
</div>
<a class="anchor" id="abf9ee789f7405a424a0b412257623cd0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dcounter = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1bfaa14e96039bba6ec0de428d4eeff1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float eInt[3] = {0.0f, 0.0f, 0.0f}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>vector to hold quaternion </p>

</div>
</div>
<a class="anchor" id="a307450bd86f46af27a40a489f873e9f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float gRes</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3842ef7e7823c37b07e3873e088f7df1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="_m_p_u9150_8h.html#a56b5f26fc75e706b7513b8bac0006980">Gscale</a> = <a class="el" href="_m_p_u9150_8h.html#a56b5f26fc75e706b7513b8bac0006980a18297ef630f6920f812695549cc2262b">GFS_250DPS</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Scale range of gyro </p>

</div>
</div>
<a class="anchor" id="addac5578d412440de5e9c3760475dec7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float gyro[3] = {0.0f}</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>corrected and usefull gyro data </p>

</div>
</div>
<a class="anchor" id="a4d9c8729a5e996511b33700675fe994b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t gyroRaw[3]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>raw data from gyroscope </p>

</div>
</div>
<a class="anchor" id="a51fdd16f159d1e82e7c5c7445e1bf022"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">XMC_I2C_CH_CONFIG_t i2c_cfg_mpu</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">{</div><div class="line">  .baudrate = 400000U,  </div><div class="line">}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1f31e316557e6fb374efe71d557b59c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">XMC_GPIO_CONFIG_t i2c_scl_mpu</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">{</div><div class="line">  .mode = XMC_GPIO_MODE_OUTPUT_OPEN_DRAIN_ALT1,         </div><div class="line">  .output_strength = XMC_GPIO_OUTPUT_STRENGTH_MEDIUM    </div><div class="line">}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8af7385d4430f2a52a33944e75b76dda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">XMC_GPIO_CONFIG_t i2c_sda_mpu</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div><div class="line">{</div><div class="line">  .mode =   XMC_GPIO_MODE_OUTPUT_OPEN_DRAIN_ALT1,       </div><div class="line">  .output_strength = XMC_GPIO_OUTPUT_STRENGTH_MEDIUM    </div><div class="line">}</div></div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a86a3ab105f11d2513678f38ea4e5ac1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t lastUpdate = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>vector to hold integral error for Mahony method </p>

</div>
</div>
<a class="anchor" id="a8bfde20656d3b3e853ffd2bacd794bc5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float mag[3] = {0.0f}</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>corrected and usefull magnetometer data </p>

</div>
</div>
<a class="anchor" id="ab21cc09df0e86cbca99e62e46e362334"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float magbias[3] = {0.0f, 0.0f, 0.0f}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4d41bf736f1c2b22106e031a60ab3380"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float magCalibration[3] = {0.0f, 0.0f, 0.0f}</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a87ec3a7b706cdb284c43edced845acd4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int16_t magRaw[3]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>raw data from magnetometer </p>

</div>
</div>
<a class="anchor" id="ab80fbc567eaccc2870b5f3adf0a4ed04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float mRes</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="acbffa34110f15b21994d3d087a0f4e7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float q[4] = {1.0f, 0.0f, 0.0f, 0.0f}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Factory mag calibration and mag bias. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
