/*******************************************************************************
**                      Author(s) Identity                                    **
********************************************************************************
**                                                                            **
** Initials     Name                                                          **
** ---------------------------------------------------------------------------**
** AM           Andreas Mark                                                  **
** DW           Dominik Wieland                                               **
**                                                                            **
**                                                                            **
*******************************************************************************/

/*******************************************************************************
**                      Revision Control History                              **
*******************************************************************************/
/*
 * V0.0: 04-04-2015, AM:  Initial Version
 * V0.1: 21-07-2016, DW:  Port of SW from DAVE3 to DAVE4
 */


/*******************************************************************************
**                      Includes                                              **
*******************************************************************************/
#include "util.h"

/*******************************************************************************
**                      Private Constant Definitions to be changed            **
*******************************************************************************/

/*******************************************************************************
**                      Private Macro Definitions                             **
*******************************************************************************/

/*******************************************************************************
**                      Global Type Definitions                               **
*******************************************************************************/

/*******************************************************************************
**                      Private Type Definitions                              **
*******************************************************************************/

/*******************************************************************************
**                      Global Function Declarations                          **
*******************************************************************************/

/*******************************************************************************
**                      Private Function Declarations                         **
*******************************************************************************/

/*******************************************************************************
**                      Global Constant Definitions                           **
*******************************************************************************/

/*******************************************************************************
**                      Private Constant Definitions                          **
*******************************************************************************/

/*******************************************************************************
**                      Global Variable Definitions                           **
*******************************************************************************/

/*******************************************************************************
**                      Private Variable Definitions                          **
*******************************************************************************/
volatile uint32_t timer_cnt = 0U; /**< Counts up every millisecond - is used for the delay function*/

/*******************************************************************************
**                      Global Function Definitions                           **
*******************************************************************************/
/**
 *  \brief Simple delay function
 *  
 *  \param [in] delayTimeInMillis delay length in milliseconds
 *  
 *  \details Lets the program wait for the desired time
 */
void delay(uint32_t delayTimeInMillis)
{
	uint32_t now = timer_cnt;
	while((now+delayTimeInMillis)>timer_cnt);
}
/**
 *  \brief Getter for timer_cnt
 *  
 *  \return The current value of timer_cnt
 *  
 *  \details returns the current value of the delay timer
 */
uint32_t getDelaymillis(void)
{
	return timer_cnt;
}


/*******************************************************************************
**                      Private Function Definitions                          **
*******************************************************************************/
/**
 *  \brief Interrupt Service Routine of the Util_Timer
 *  
 *  
 *  \details elevates the timer count variable by 1
 */
void Util_Timer_ISR(void)
{
	timer_cnt++;
}
